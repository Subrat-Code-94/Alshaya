/* eslint-disable */
import*as e from"/scripts/aem.js";var t,a={240:(t,a,n)=>{n.d(a,{A:()=>he});var r=n(540),o=n(338);function s(){return document.documentElement.lang||"en"}window.configsPromises={};function c(e){const t=function(){const{location:e}=window;return"about:srcdoc"===e.href?window.parent.location.origin:e.origin}();return new URL(`${t}/${e?`${e}/`:""}configs.json?sheet=prod`)}const i=async e=>{const t="prod";window.configsPromises?.[t]||(window.configsPromises[t]=(async()=>{const e=s();let t=window.sessionStorage.getItem("config"),a=window.sessionStorage.getItem(`config:${e}`);if(!t||!a){const n=fetch(c()),r=fetch(c(e));try{const o=await Promise.all([n,r]);[t,a]=await Promise.all(o.map((e=>e.text()))),window.sessionStorage.setItem("config",t),window.sessionStorage.setItem(`config:${e}`,a)}catch(e){console.error("no config loaded",e)}}const n=JSON.parse(t);a&&JSON.parse(a).data.forEach((e=>{const t=n.data.find((t=>t.key===e.key));t?t.value=e.value:n.data.push(e)}));return n})());const a=(await window.configsPromises[t]).data;return a.find((t=>t.key===e))?.value};async function l(e,t=!1){try{return async function(e,t=!1){const a={"Content-Type":"application/json"};t&&(a.Authorization=`Bearer ${u()}`);const n=new URL(e),r=await fetch(n,{method:"GET",headers:a}),o={success:!!r.ok,status:r.status,message:r.statusText,data:await r.json()};return o.data?.message&&(o.message=o.data.message),o}(e,t)}catch(e){return console.error("Error fetching data",e),{success:!1,message:e.message}}}async function d(e,t,a=!1,n="POST"){try{return async function(e,t,a=!1,n="POST"){const r={"Content-Type":"application/json"};a&&(r.Authorization=`Bearer ${u()}`);const o=new URL(e);if(t){const e=await fetch(o,{method:n,headers:r,body:JSON.stringify(t)}),a={success:!!e.ok,status:e.status,message:e.statusText,data:await e.json()};return a.data?.message&&(a.message=a.data.message),a}const s=await fetch(o,{method:n,headers:r}),c={success:!!s.ok,status:s.status,message:s.statusText,data:await s.json()};return c.data?.message&&(c.message=c.data.message),c}(e,t,a,n)}catch(e){return console.error("Error fetching data",e),{success:!1,message:e.message}}}function u(){return function(e){let t;return document.cookie.split(";").forEach((a=>{const[n,r]=a.trim().split("=");n===e&&(t=decodeURIComponent(r))})),t}("auth_user_token")??""}const m=e=>{let t=null;const a=window.localStorage.getItem(e);if(a)try{t=JSON.parse(a).value.replaceAll('"',"")}catch(e){console.error("Error parsing JSON from local storage",e)}return t},p={CART_STEP:1,LOGIN_STEP:2,CHECKOUT_STEP:3,CONFIRMATION_STEP:4},_={moveToFav:"Move to favorites",promoBtn:"Done",productArtNo:"Art. no.",productColorLabel:"Color label",productSize:"Size",excludingDelivery:"Excluding delivery",deleteSuccess:"The product has been removed from your basket",inclusiveVat:"Inclusive of VAT",deleteitempopupmessage:"Do you want to move this item to favorites?",itemmovetofavtext:"Yes, Move to favorites",itemremovetext:"No, remove it",emptyCartMessage:"Your shopping bag is empty",emptyCartFavMessage:"Here are some of our favorites",productPriceSaveLabel:"save",orderSummaryTitle:"Order Summary",subTotalLabel:"Subtotal",discountsLabel:"Discounts",orderTotalLabel:"Order Total",bagUpdatedSuccessLabel:"Your bag has been updated successfully",quantityNotAvailableLabel:"The requested quantity is not available",deliveryMethodTitle:"Delivery method",homeDelivery:"Home Delivery",clickCollect:"Click & Collect",bagLabel:"Bag",signInLabel:"Sign In",deliveryPaymentLabel:"Delivery & Payment",confirmationLabel:"Confirmation",promotionLabel:"Do you have a Promotional Code?",promotionInputPlaceholder:"Promo code",promotionApplyButtonLabel:"Apply",promotionAppliedButtonLabel:"Applied",promotionRequiredValidationErrorMessage:"Please enter a promotional code",promotionDiscountAndVouchersLabel:"Discounts & Vouchers",promotionInvalidCodeMessage:"Sorry, this code is invalid. Please enter a valid promotional code.",discountLabel:"Discount",bonusVouchers:"Bonus Vouchers",memberOffers:"Member Offers",clearAllText:"CLEAR ALL",applyOffersText:"APPLY OFFERS",applyVouchersText:"APPLY VOUCHERS",checkoutAsGuest:"Checkout as a Guest",backToBasket:"Back to basket",sepratorOrLabel:"OR",signInEmail:"sign in with email address",signInSocial:"sign in with social media",checkoutBtn:"Continue to Checkout",outOfStockContent:"This product is out of stock",outOfStockToast:"Sorry, one or more products in your bag are no longer available. Please review your bag in order to checkout securely.",shippingMethodFreeLabel:"FREE",changeDeliveryAddressCta:"Change",confirmationSentTo:"Confirmation sent to:",orderNumber:"Order Number:",transacioId:"Transaction ID:",paymentId:"Payment ID:",resultCode:"Result Code:",orderDetail:"Order Detail",deliveryTo:"Delivery to:",billingAddress:"Billing Address:",mobileNumber:"Mobile Number:",paymentMethod:"Payment Method:",deliveryType:"Delivery Type:",expecteDeliveryWithin:"Expected Delivery Within:",numberOfItems:"Number of Items:",auraPointsEarned:"Aura Points Earned:",homeDeliveryTitle:"Free delivery on all orders above QAR 199.",clickCollectTitle:"Order now & collect from store of your choice",clickCollectDisabled:"Collect your order in-store is unavailable",deliveryInformationTitle:"Delivery Information",deliveryInformationBtnText:"Please add your contact details and address → →",deliveryInformationModalTitle:"Delivery Information",collectionStoreTitle:"Collection Store",collectionStoreBtnText:"Select your preferred collection store",styleText:"Style",sendToText:"Send to",customMessageEgift:"Message",egiftcardtext:"eGift Card",egiftGetcode:"Get Code",egiftCardInputTitle:"eGift Card Number",cashOnDeliveryLabel:"Cash on delivery service charge",egiftCardInputPlaceholder:"Enter verification code",discountTooltipMessageApplied:"Discount applied",discountTooltipMessageMemberDiscount:"Member Discount",discountTooltipMessageAdvantageCardDiscount:"Advantage Card Discount",memberOffersApplied:"Member offers applied",bonusVouchersApplied:"Bonus voucher applied",bonusVouchersExpiresOn:"Expires On",bonusVoucherAppliedLabel:"voucher applied",paymentMethodsTitle:"Payment Methods",freeGiftLabel:"Free gift with Purchase"},v={isLoggedIn:!1,cart:{cartId:null,data:{},isLoading:!1,isError:!1,oosDisable:!1,isCheckoutFlag:!0},promotion:{isApplyingPromoCode:!1,isRemovingPromoCode:!1,errorMessage:"",data:{}},activeProgressStep:1,store:null,deliveryInformation:{isDialogOpen:!1,isModalVisible:!1,isLoadingShippingMethods:!1,shippingMethods:[],changeAddress:""},userAddressList:[],editAddress:{}},g=(0,r.createContext)(v);function b(e){const[t,a]=(0,r.useState)(v.cart),[n,o]=(0,r.useState)(!!u()),[s,c]=(0,r.useState)(v.cart.cartId),[l,d]=(0,r.useState)(e?.placeholders),[_,b]=(0,r.useState)(v.activeProgressStep),[f,y]=(0,r.useState)(v.store),[h,E]=(0,r.useState)(v.store),[w,C]=(0,r.useState)(v.promotion),[N,S]=(0,r.useState)(v.deliveryInformation),[k,x]=(0,r.useState)(v.deliveryInformation),[I,T]=(0,r.useState)(v.cart.oosDisable),[A,L]=(0,r.useState)(v.cart.isCheckoutFlag),[$,P]=(0,r.useState)(v.cart.editAddress),M=t?.data?.items?.filter((e=>"1"!==e?.extensionAttributes?.extension_attributes?.is_egift&&!e?.extensionAttributes?.extension_attributes?.is_free_gift&&e?.extensionAttributes?.extension_attributes?.error_message)),O=t?.data?.items?.filter((e=>"1"!==e?.extensionAttributes?.extension_attributes?.is_egift&&!e?.extensionAttributes?.extension_attributes?.is_free_gift&&e?.isQuantityNotAvailable));return(0,r.useEffect)((()=>{switch(window.location.pathname){case`/${document.documentElement.lang}/cart`:b(p.CART_STEP);break;case`/${document.documentElement.lang}/cart/login`:if(n){window.location.assign(`/${document.documentElement.lang}/checkout`);break}window.location.search!==`?redirect=/${document.documentElement.lang}/checkout`&&window.location.assign(`/${document.documentElement.lang}/cart/login?redirect=/${document.documentElement.lang}/checkout`),b(p.LOGIN_STEP);break;case`/${document.documentElement.lang}/checkout`:b(p.CHECKOUT_STEP);break;case`/${document.documentElement.lang}/confirmation`:b(p.CONFIRMATION_STEP);break;default:b(p.CART_STEP)}}),[n]),(0,r.useEffect)((()=>{d(e?.placeholders)}),[e?.placeholders]),(0,r.useEffect)((()=>{o(!!u())}),[u]),(0,r.useEffect)((()=>{const e=m("M2_VENIA_BROWSER_PERSISTENCE__cartId");c(e);const a=t?.data?.id??null;a&&c(a)}),[c,n,t]),(0,r.useEffect)((()=>{(async()=>{const e=await i("cart-price-decimals"),t=await i("cart-show-free-returns");y(e),E("true"===t)})()}),[]),(0,r.useEffect)((()=>{T(M?.length>0||O?.length>0||!A)}),[t,I,A]),r.createElement(g.Provider,{value:{isLoggedIn:n,cartId:s,cart:t,setCart:a,placeholders:l,activeProgressStep:_,setActiveProgressStep:b,priceDecimals:f,promotion:w,setPromotion:C,deliveryInformation:N,setDeliveryInformation:S,userAddressList:k,setUserAddressList:x,cartShowFreeReturns:h,oosDisableButton:I,setOOSDisableButton:T,setIsCheckoutFlag:L,isCheckoutFlag:A,editAddress:$,setEditAddress:P}},e?.children)}const f=g;const y=(e=>{var t={};return n.d(t,e),t})({decorateIcons:()=>e.decorateIcons,toCamelCase:()=>e.toCamelCase}),h=(e,t)=>{const a=[];return t===e.id&&a.push("active"),e.isClickable&&e.id!==t&&a.push("clickable"),e.id<t&&a.push("completed"),a};const E=function(){const{activeProgressStep:e,placeholders:t,isLoggedIn:a}=(0,r.useContext)(f),n=(0,r.useRef)(null),o=`cart/login?redirect=/${document.documentElement.lang}/checkout`,s=[{id:1,label:t?.bagLabel,isClickable:!0,url:`/${document.documentElement.lang}/cart`},{id:2,label:t?.signInLabel,isClickable:!(a&&3===e),url:`/${document.documentElement.lang}/${a?"checkout":o}`},{id:3,label:t?.deliveryPaymentLabel,isClickable:a,url:`/${document.documentElement.lang}/checkout`},{id:4,label:t?.confirmationLabel,isClickable:!1}],c=t=>t<e?r.createElement("span",{className:"icon icon-tick-complete"}):t;return(0,r.useEffect)((()=>{n&&n.current&&(0,y.decorateIcons)(n.current)}),[e]),r.createElement("div",{ref:n,className:"progress__bar-container"},s.map((t=>r.createElement("div",{key:t.id,className:`progress__bar-item ${h(t,e).join(" ")}`},r.createElement("div",{className:"progress__bar-item-number"},r.createElement("div",{className:"progress__bar-item-number-wrapper"},t.isClickable&&t.id!==e?r.createElement("a",{className:"progress__bar-item-number-div",href:t.url},r.createElement("div",{className:"progress__bar-item-check-wrapper"},c(t.id))):r.createElement("div",{className:"progress__bar-item-number-div"},r.createElement("div",null,c(t.id))))),r.createElement("div",{className:"progress__bar-item-label-wrapper"},t.isClickable&&t.id!==e?r.createElement("a",{className:"progress__bar-item-label",href:t.url},t.label):r.createElement("div",{className:"progress__bar-item-label"},t.label))))))},w="web";function C(){const e=window.location.href;return e.includes("/cart")?"cart":e.includes("/checkout")?"checkout":""}async function N(e,t=!1,a="GET",n=null,r="V1"){let o=null;try{const s={method:a,headers:{"Content-Type":"application/json",Store:await i("commerce-store-view-code"),"Alshaya-Channel":w}};if(t){const e=u();e&&(s.headers.Authorization=`Bearer ${e}`)}!n||"POST"!==a&&"PUT"!==a||(s.body=JSON.stringify(n));const c=await i("commerce-rest-endpoint"),l=await i("commerce-store-view-code"),d=await fetch(`${c}/${l}/${r}/${e}`,s);o=await d.json(),d.data?.message&&(o.message=d.data.message)}catch(e){console.error(e)}return{response:o}}async function S(e,t={},a=!1){let n=null;try{const r=u(),o={method:"POST",headers:{"Content-Type":"application/json",Store:await i("commerce-store-view-code"),"Alshaya-Channel":w,"Alshaya-Page-Identifier":C(),"Alshaya-Country-Code":await i("country-code"),...r?{Authorization:`Bearer ${r}`}:{}},body:JSON.stringify({query:e,variables:t})},s=a?await i("cart-mesh-endpoint"):await i("commerce-endpoint"),c=await fetch(s,o);n=await c.json(),c.data?.message&&(n.message=c.data.message)}catch(e){console.error(e)}return{response:n}}const k="\n    extension_attributes {\n            delivery_matrix {\n            product_sku\n                applicable_shipping_methods {\n                    available\n                    carrier_code\n                    carrier_title\n                    cart_page_title\n                    error_message\n                    method_code\n                    method_title\n                }\n            }\n            cart {\n                id\n                applied_rule_ids\n                billing_address {\n                    firstname\n                    lastname\n                    email\n                    telephone\n                    street\n                    city\n                    region\n                    postcode\n                    region_id\n                    region_code\n                    country_id\n                    custom_attributes {\n                        attribute_code\n                        value\n                        name\n                    }\n                }\n                items {\n                    item_id\n                    sku\n                    qty\n                    name\n                    price\n                    product_type\n                    quote_id\n                    extension_attributes {\n                        item_name_en\n                        parent_product_sku\n                        error_message\n                        style_code\n                        color\n                        size\n                        season_code\n                        is_aura_free_item\n                        is_free_gift\n                        brand_full_name\n                        original_price\n                        egift_options {\n                            hps_giftcard_amount\n                            hps_giftcard_sender_name\n                            hps_giftcard_recipient_name\n                            hps_giftcard_sender_email\n                            hps_giftcard_recipient_email\n                            hps_giftcard_message\n                        }\n                        hps_style_msg\n                        image_url\n                        is_egift\n                        is_topup\n                        product_media {\n                            id\n                            media_type\n                            label\n                            position\n                            disabled\n                            types\n                            file\n                        }\n                    }\n                }\n                extension_attributes {\n                    free_shipping_text\n                    attempted_payment\n                    applied_rule_ids\n                    applied_rule_ids_with_discount\n                    is_locked\n                    is_multi_brand_cart\n                    applied_hm_offer_code\n                    hm_voucher_discount\n                    applied_hm_voucher_codes\n                    surcharge {\n                        is_applied\n                        amount\n                    }\n                    member_price_discount\n                    aura_promotion_discount\n                    has_exclusive_coupon\n                    shipping_assignments {\n                        shipping {\n                            address {\n                                firstname\n                                lastname\n                                email\n                                telephone\n                                street\n                                city\n                                region\n                                postcode\n                                region_id\n                                region_code\n                                country_id\n                                custom_attributes {\n                                    attribute_code\n                                    value\n                                    name\n                                }\n                            }\n                            method\n                        }\n                    }\n                }\n            }\n            totals {\n            total_segments{\n                    code\n                    title\n                    value\n                }\n               shipping_incl_tax\n                coupon_code\n                extension_attributes {\n                    coupon_label\n                    reward_points_balance\n                    reward_currency_amount\n                    base_reward_currency_amount\n                    is_hm_applied_voucher_removed\n                    is_all_items_excluded_for_adv_card\n                }\n                items {\n                    extension_attributes {\n                        adv_card_applicable\n                    }\n                }\n            }\n        }\n",x='\n    items {\n        id\n        uid\n        quantity\n        product {\n            promotions {\n                context\n                url\n                label\n                type\n            }\n            reserve_and_collect\n            ship_to_store\n            ... on commerce_SimpleProduct {\n                sku\n                dynamicAttributes(fields:["color","size"])\n                stock_data {\n                    qty\n                    max_sale_qty\n                    max_sale_qty_parent\n                }\n                stock_status\n            }\n            url_key\n            assets_cart\n            name\n            brand_full_name\n            sku\n            gtm_attributes{\n                id\n                name\n                variant\n                price\n                brand\n                category\n                dimension2\n                dimension3\n                dimension4\n            }\n        }\n        ... on commerce_ConfigurableCartItem {\n            configured_variant {\n                dynamicAttributes(fields:["color","size"])\n                reserve_and_collect\n                ship_to_store\n                name\n                sku\n                brand\n                price_range {\n                    maximum_price {\n                        regular_price {\n                            value\n                            currency\n                        }\n                        final_price {\n                            value\n                            currency\n                        }\n                        discount {\n                            percent_off\n                        }\n                    }\n                }\n                stock_data {\n                    qty\n                    max_sale_qty\n                    max_sale_qty_parent\n                }\n                stock_status\n                color_label\n                size\n            }\n            configurable_options {\n                option_label\n                value_id\n                value_label\n            }\n        }\n        prices {\n            row_total_including_tax {\n                value\n                currency\n            }\n        }\n    }\n',I="\n    prices {\n        grand_total {\n            value\n            currency\n        }\n        subtotal_excluding_tax {\n            value\n            currency\n        }\n        subtotal_including_tax {\n            value\n            currency\n        }\n        applied_taxes {\n            amount {\n                value\n                currency\n            }\n        }\n        discount {\n            amount {\n                value\n                currency\n            }\n            label\n        }\n    }\n",T={CART_QUERY__SHIPPING_ADDRESSES:"\n    shipping_addresses {\n        firstname\n        lastname\n        available_shipping_methods {\n        amount {\n            currency\n            value\n        }\n        available\n        carrier_code\n        carrier_title\n        method_code\n        method_title\n        error_message\n        price_excl_tax {\n            value\n            currency\n        }\n        price_incl_tax {\n            value\n            currency\n        }\n        }\n        selected_shipping_method {\n        amount {\n            value\n            currency\n        }\n        carrier_code\n        carrier_title\n        method_code\n        method_title\n        }\n    }\n",CART_QUERY__EXTENSION_ATTRIBUTE:k,CART_QUERY__ITEMS:x,CART_QUERY__PRICES:I,CART_QUERY:`\n    {\n        id\n        total_quantity\n        ${k}\n        ${x}\n        ${I}\n        available_payment_methods{\n          code\n          title\n        }\n        selected_payment_method{\n          code\n        }\n    }\n`,CHECKOUTCOM_CONFIG_QUERY:"\n    {\n        public_key\n        environment\n        allowed_card_types\n        mada_bin_numbers\n        display_card_number_type\n        apple_pay_merchant_id\n        apple_pay_merchant_capabilities\n        apple_pay_supported_networks\n        vault_enabled\n        cvv_check\n        api_url\n        fawry_expiry_time\n        benefit_pay_expiry_time\n    }\n"},A=e=>{const{isLoggedIn:t,cart:a,setCart:n,cartId:o}=(0,r.useContext)(f),s=t?`query customerCart {\n  commerce_customerCart ${T.CART_QUERY}\n}`:`query ($cartId: String!) {\n  commerce_cart(cart_id: $cartId) ${T.CART_QUERY}\n}`,c=(0,r.useCallback)((()=>{n({...a,isLoading:!0}),S(s,{cartId:o},!0).then((r=>{const o=t?r.response.data.commerce_customerCart:r.response.data.commerce_cart;o.items=o?.items?.map(((e,t)=>o?.extension_attributes?.cart?.items[t]?.extension_attributes?.is_free_gift?{...e}:Number(e?.quantity)<=Number(e?.configured_variant?.stock_data?.qty)?{...e,isQuantityNotAvailable:!1,extensionAttributes:o?.extension_attributes?.cart?.items?.find((t=>Number(e?.id)===Number(t?.item_id)))}:{...e,isQuantityNotAvailable:!0,extensionAttributes:o?.extension_attributes?.cart?.items?.find((t=>Number(e?.id)===Number(t?.item_id)))})),n({...a,data:o}),window.dispatchEvent(new CustomEvent("updateMiniCart")),1===e&&window.dispatchEvent(new CustomEvent("react:datalayerViewCartEvent",{detail:{value:o?.prices?.grand_total?.value||0,currency:o?.prices?.grand_total?.currency||"",productData:o.items.map((e=>{const t=e?.product?.gtm_attributes;return{gtm:{"gtm-magento-product-id":t?.id||"","gtm-name":t?.name||"","gtm-brand":t?.brand||"","gtm-category":t?.category||"","gtm-variant":t?.variant||"","gtm-stock":"IN_STOCK"===e?.configured_variant?.stock_status?"in stock":"","gtm-price":t?.price||""},discount:{en:""},quantity:e.quantity}}))}}))})).catch((()=>{n({...a,isError:!0,isLoading:!1})}))}),[t,o,n,a]);return(0,r.useEffect)((()=>{o&&c()}),[o]),null},L=async(e,t,a)=>{const n=`mutation updateCartItems($cartId: String!, $cartItemId: ID!, $quantity: Float!) {\n    commerce_updateCartItems(\n      input: {\n        cart_id: $cartId\n        cart_items: [{ cart_item_uid: $cartItemId, quantity: $quantity }]\n      }\n    ) {\n      cart ${T.CART_QUERY}\n    }\n  }`;let r=[];try{r=(await S(n,{cartId:t,cartItemId:e,quantity:a},!0)).response,window.dispatchEvent(new CustomEvent("updateMiniCart"))}catch(e){console.error("Error updating quantity:",e)}return r};const $=function(){const e=(0,r.useRef)(null);return(0,r.useEffect)((()=>{e.current&&(0,y.decorateIcons)(e.current)}),[]),r.createElement("div",{className:"loading-spinner",ref:e},r.createElement("span",{className:"icon icon-ic-loader"}))};const P=function({isDisabled:e,totalQtyAvailable:t,orderedQty:a=1,qtyNotAvailable:n,isQtyAvailable:o,product:s,bagUpdatedSuccessLabel:c}){const{cart:i,cartId:l,setCart:d}=(0,r.useContext)(f),[u,m]=(0,r.useState)(!1),[p,_]=(0,r.useState)(!1),[v,g]=(0,r.useState)(a.toString()),b=(0,r.useRef)(null),h=(0,r.useRef)(null),E=(0,r.useRef)(null),w=(0,r.useRef)(null),C=e=>{b.current&&!b.current.contains(e.target)&&m(!1)};(0,r.useEffect)((()=>{h.current&&(0,y.decorateIcons)(h.current)}),[p]),(0,r.useEffect)((()=>(document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)})),[]);const N=(0,r.useCallback)((async(e,t)=>{const{uid:a}=s;m(!1),_(!0),window.dispatchEvent(new CustomEvent("react:resetPageMessage"));const r=await L(a,l,+e);if(r?.data?.commerce_updateCartItems?.cart){const a=r.data.commerce_updateCartItems.cart?.items?.map((e=>{const a=t?.data?.items?.find((t=>e?.product?.sku===t?.product?.sku));return e?.product?.sku===s?.product?.sku?{...e,isQuantityNotAvailable:!1,extensionAttributes:r.data.commerce_updateCartItems?.cart?.extension_attributes?.cart?.items?.find((t=>Number(e?.id)===Number(t?.item_id)))}:{...e,isQuantityNotAvailable:a?.isQuantityNotAvailable,extensionAttributes:a?.extensionAttributes}}));r.data.commerce_updateCartItems.cart.items=a;const o=t?.data?.items?.find((e=>s?.product?.sku===e?.product?.sku));if(o&&e<o.quantity){const t=o?.product?.gtm_attributes;window.dispatchEvent(new CustomEvent("react:datalayerRemoveFromCartEvent",{detail:{quantity:o.quantity-e,productData:{gtm:{id:t?.id||"",name:t?.name||"",brand:t?.brand||"",category:t?.category||"",variant:t?.variant||"",price:t?.price||""},inStock:"IN_STOCK"===o?.configured_variant?.stock_status}}}))}d({...t,data:r.data.commerce_updateCartItems.cart}),window.dispatchEvent(new CustomEvent("react:showPageSuccessMessage",{detail:{message:c}})),n(!0);const i=document.getElementsByClassName("page-success-message");i&&i[0]&&i[0].scrollIntoView({behavior:"smooth",block:"start"})}else if(r.errors){const e=i?.data?.items?.map((e=>e?.product?.sku===s?.product?.sku?{...e,isQuantityNotAvailable:!0}:{...e}));d({...i,data:{...i?.data,items:e}}),n()}_(!1),g(e)}),[i]);return(0,r.useEffect)((()=>{if(u&&E.current&&w.current){const{offsetTop:e}=w.current,{offsetHeight:t}=w.current,a=e+t,n=E.current.clientHeight;E.current.scrollTop=a-n+10}}),[u]),r.createElement("div",{className:"qty-dropdown",ref:b},p?r.createElement($,null):r.createElement(r.Fragment,null,r.createElement("button",{type:"button",ref:h,onClick:()=>{m(!u)},className:`qty-dropdown__toggle${o?"":"qty-dropdown__error"} ${e?"qty-dropdown-disabled":""}`},r.createElement("span",null,v),r.createElement("span",{className:"chevron"+(u?" open":"")},r.createElement("span",{className:"icon icon-chevron-down"}))),u&&r.createElement("div",{className:"qty-dropdown__menu",ref:E},(()=>{const e=[],a=+v>10||+v>+t?v:Math.min(+t,10);for(let n=1;n<=a;n+=1){let a="",o=!1;n===+v&&(a+="selected"),+t<n&&(a+=" disabled",o=!0),e.push(r.createElement("div",{role:"button",tabIndex:o?-1:0,key:n,className:a,onClick:()=>!o&&N(n,i),onKeyUp:e=>"Enter"===e.key&&!o&&N(n,i),ref:n===+v?w:null},n))}return e})())))},M="guestUserwishlistInfo";function O(){const e=new Date;return new Date(e.getTime()+6048e5).getTime()}async function q(){if(!u()){if(localStorage.getItem(M)){const t=JSON.parse(localStorage.getItem(M));return e=t.expiryTime,(new Date).getTime()>e?(localStorage.removeItem(M),{items:[]}):t.data}return{items:[]}}var e;const t=await i("commerce-rest-endpoint"),a=await i("commerce-store-view-code"),n=`${t}/${a}/V1/wishlist/me/get`,r=await l(n,!0),{data:o,success:s}=r;if(s){const e=o;if(e.items=[],e?.items_count>0){const n=`${t}/${a}/V1/wishlist/me/items`,r=await l(n,!0),{success:o,data:s}=r;o&&s?.items?.length>0&&(e.items=s.items)}return e}return{}}async function R(e,t=null){let a=t;t||(a=await q());const n=a.items?.findIndex((t=>t.sku===e));return n}async function D(e,t,a){a||await async function(){const e=u();if(!e)return{};const t=`${await i("commerce-rest-endpoint")}/${await i("commerce-store-view-code")}/V1/wishlist/me/create`,a=await d(t,{name:"MyFavorites",visibility:!0},!!e),{data:n,success:r,message:o}=a;return r?{status:r,data:n,message:o}:(console.error(o),null)}();if(t){const t=`${await i("commerce-rest-endpoint")}/${await i("commerce-store-view-code")}/V1/wishlist/me/item/add`,a={items:[{sku:e.sku}]},n=await d(t,a,!0),{success:r,message:o,data:s}=n;if(!r||!s.status)return{status:r&&s.status,message:s.message}}else await async function(e){const t=O(),a=await q(),n=a?.items?.findIndex((t=>t.sku===e.sku));if(-1===n){a.items.push({sku:e.sku});const n={data:a,expiryTime:t};localStorage.setItem(M,JSON.stringify(n))}}(e);return document.querySelector("main").dispatchEvent(new CustomEvent("favourites-updated",{detail:{count:a.items.length,product:e,showSignIn:!0}})),{status:!0,message:"Product added to wishlist"}}async function F(e,t,a){if(!t)return await async function(e){const t=O(),a=await q(),n=await R(e.sku,a);if(-1!==n){a.items.splice(n,1);const e={data:a,expiryTime:t};localStorage.setItem(M,JSON.stringify(e))}}(e),{status:!0,message:"Product removed from wishlist"};const n=await R(e.sku,a),{wishlist_item_id:r}=a.items[n],o=`${await i("commerce-rest-endpoint")}/${await i("commerce-store-view-code")}/V1/wishlist/me/item/${r}/delete`,s=await d(o,null,!0,"DELETE"),{message:c,success:l}=s;return{status:l,message:c}}const U=async(e,t)=>{const a=`mutation removeItemFromCart($cartId: String!, $cartItemId: ID!) {\n      commerce_removeItemFromCart(\n        input: {\n          cart_id: $cartId,\n          cart_item_uid: $cartItemId\n        }\n      )\n      {\n        cart ${T.CART_QUERY}\n      }\n    }`;let n=[];try{n=(await S(a,{cartId:t,cartItemId:e},!0)).response.data.commerce_removeItemFromCart.cart,window.dispatchEvent(new CustomEvent("updateMiniCart"))}catch(e){console.error("Error removing item from cart:",e)}return n};const V=function({onMoveToFav:e,onRemove:t,productImageUrl:a,isEgift:n,productSku:o,disabled:s,isFreeGift:c}){const[i,l]=(0,r.useState)(!1),d=(0,r.useRef)(null),u=()=>{q().then((e=>{e&&e.items&&e.items.findIndex((e=>e.sku===o))>-1?t():l(!0)})).catch((()=>{l(!0)}))},{placeholders:m}=(0,r.useContext)(f);(0,r.useEffect)((()=>{i&&document.querySelector("#item-popup-modal")&&(0,y.decorateIcons)(document.querySelector("#item-popup-modal"))}),[i]),(0,r.useEffect)((()=>{d.current&&(0,y.decorateIcons)(d.current)}),[]);const p=()=>{l(!1)};return r.createElement("div",{className:"delete-item",ref:d},r.createElement("span",{className:`icon ${n||c||!s?"icon-trash-grey trash-grey":"icon-trash-red trash-red"} ${c?"icon-delete-disabled":""} icon-md`,onClick:n?t:u,onKeyUp:e=>"Enter"===e.key&&(n?t():u()),role:"button",tabIndex:0,"aria-label":"delete button"}),i&&r.createElement("div",{className:"delete_popup_overlay"},r.createElement("div",{className:"popup-delete"},r.createElement("div",{id:"item-popup-modal",className:"delete_popup_main"},r.createElement("span",{onClick:p,onKeyUp:e=>"Enter"===e.key&&p(),role:"button",tabIndex:0,className:"close_icon","aria-label":"close"},r.createElement("span",{className:"icon icon-close-icon"})),r.createElement("div",{className:"popup_body"},r.createElement("img",{src:a,alt:"item"}),r.createElement("div",{className:"item_confirmation"},r.createElement("p",null,m.deleteitempopupmessage))),r.createElement("div",{className:"popup_footer"},r.createElement("button",{type:"button",onClick:e,className:"move_to_fav_list"},m.itemmovetofavtext),r.createElement("button",{type:"button",onClick:t,className:"remove_from_cart"},m.itemremovetext))))))};const Q=function({data:e,icon:t,content:a,isdisabled:n}){return r.createElement("div",{className:"delivery-method-info-container "+(n?"":"delivery-method-info-container-inactive")},r.createElement("span",{className:"delivery-method-info-label "+(n?"delivery-method-info-label--active":"delivery-method-info-label--inactive")},e),r.createElement("span",{className:`${t} iconInfo`}),r.createElement("span",{className:"delivery-method-info-value"},a))};const B=function({product:e,cart:t}){const a=(0,r.useRef)(null);(0,r.useEffect)((()=>{a.current&&(0,y.decorateIcons)(a.current)}),[]);const n=e?.product?.sku;return r.createElement("div",{className:"product-delivery-methods",ref:a},((e,t)=>{const a=t?.find((t=>t?.product_sku===e));return a&&a.applicable_shipping_methods?a.applicable_shipping_methods.map((e=>r.createElement("div",{className:`delivery-method delivery-method--${e.cart_page_title.toLowerCase()} ${e?.available?"delivery-method--active":"delivery-method--inactive"}`,key:e.method_code},r.createElement(Q,{data:e.cart_page_title,icon:""+(e?.available?"icon icon-info":"icon icon-info-disabled"),content:e.method_title,isdisabled:e?.available})))):null})(n,t?.data?.extension_attributes?.delivery_matrix))},j=async(e,t=2)=>{let a=e||"";a||(a=await i("currency")||"AED");const n=await i("country-code")||"AE";return new Intl.NumberFormat(`${document.documentElement.lang||"en"}-${n}`,{style:"currency",currency:a,numberingSystem:"latn",maximumFractionDigits:t})},H=()=>Math.floor(100*Math.random()),Y=({price:e,priceDecimals:t,currency:a})=>{const[n,o]=(0,r.useState)("");return(0,r.useEffect)((()=>{(async()=>{const n=await j(a,t);o(n.format(e))})()}),[e]),n};const G=function({product:e,currency:t,checkoutHideSection:a}){const[n,o]=(0,r.useState)(!0),[c,i]=(0,r.useState)(!1),{cart:l,setCart:d,placeholders:m,cartId:p,priceDecimals:_,promotion:v}=(0,r.useContext)(f),g=JSON.parse(e?.product?.assets_cart??"[]")[0],b=g?.styles?.cart_thumbnail??"",y=l?.data?.extension_attributes?.cart?.items?.find((t=>Number(e.id)===t?.item_id)),h=y?.extension_attributes,E="1"===h?.is_egift,w=h?.is_free_gift,C=h?.egift_options?.hps_giftcard_message,N=async t=>{i(!0);const{uid:a}=t;await async function(e,t){const a=u(),n=await q();return t?t?F(e,a,n):{status:!1,message:"Some error"}:D(e,a,n)}(t?.configured_variant,!1);const n=m?.deleteSuccess??"",r=await U(a,p,n);if(e){const t=e?.product?.gtm_attributes;window.dispatchEvent(new CustomEvent("react:datalayerRemoveFromCartEvent",{detail:{quantity:e.quantity,productData:{gtm:{id:t?.id||"",name:t?.name||"",brand:t?.brand||"",category:t?.category||"",variant:t?.variant||"",price:t?.price||""},inStock:"IN_STOCK"===e?.configured_variant?.stock_status}}}))}window.addEventListener("favourites-widget-removed",(e=>{((e,t,a)=>{window.dispatchEvent(new CustomEvent("updateMiniCart")),d({...l,data:t});const n=t?.items?.length;n&&e?(window.dispatchEvent(new CustomEvent("react:showPageSuccessMessage",{detail:{message:a}})),document.querySelector(".page-success-message.visible").scrollIntoView({behavior:"smooth"})):window.dispatchEvent(new CustomEvent("react:resetPageMessage"))})(e.detail,r,n)}))},S=e?.configured_variant?.size??"",k=e?.configurable_options??"";let x="";S&&k&&(x=k.find((e=>e.value_id===S))?.value_label??"");const I=(0,r.useCallback)(((e=!1)=>{o(e)}),[]);(0,r.useEffect)((()=>{n||window.dispatchEvent(new CustomEvent("react:dataLayerCartErrorsEvent",{detail:{eventLabel:"quantity-not-available",eventAction:m?.quantityNotAvailableLabel||"The requested quantity is not available",eventPlace:`Error occured on ${window.location.href}`}}))}),[n]);const T=E?y?.price:e?.configured_variant?.price_range?.maximum_price?.regular_price?.value??0,A=E?y?.price:e?.configured_variant?.price_range?.maximum_price?.final_price?.value??0,L=e?.configured_variant?.price_range?.maximum_price?.discount?.percent_off??0,M=Y({price:T,priceDecimals:_,currency:t}),O=Y({price:A,priceDecimals:_,currency:t}),R=()=>(w?e?.product?.sku:e?.configured_variant?.sku)??"";(0,r.useEffect)((()=>{e.configured_variant?.stock_data?.qty&&e.configured_variant.stock_data.qty<e.quantity&&o(!1)}),[e]);const Q=()=>{const t=w?e?.product?.dynamicAttributes:e?.configured_variant?.dynamicAttributes;return JSON.parse(t)};return(0,r.useEffect)((()=>{h?.error_message&&(window.dispatchEvent(new CustomEvent("react:showPageErrorMessage",{detail:{message:m?.outOfStockToast}})),window.dispatchEvent(new CustomEvent("react:dataLayerCartErrorsEvent",{detail:{eventLabel:"out-of-stock",eventAction:m?.outOfStockToast,eventPlace:`Error occured on ${window.location.href}`}})),document.querySelector(".page-error-message.visible").scrollIntoView({behavior:"smooth"}))}),[h?.error_message]),r.createElement("div",{className:"product-summary__card"},r.createElement("div",{className:"product-summary__container "+(c?"loader":"")},r.createElement("div",{className:"product-summary"},r.createElement("div",{className:"product-image "+(E?"egift-class":"")},r.createElement("img",{src:E?h?.image_url:b,alt:e?.product?.name??""})),r.createElement("div",{className:"product-info "+(E?"egift-spaces":"")},r.createElement("div",{className:"product-info-title-wrapper"},!E&&(()=>{const t=e?.product?.brand_full_name??"";return t?r.createElement("span",{id:"product-brand"},t):null})(),E?r.createElement("span",{id:"product-title"},m.egiftcardtext):r.createElement("a",{id:"product-title",href:`/${s()}/${e?.product?.url_key??""}`},e?.product?.name??""),r.createElement("div",{className:"product-info__price__discount"},r.createElement("span",{id:"price"},T!==A&&r.createElement("span",{style:{textDecoration:"line-through"}},M)," ",r.createElement("span",{className:T!==A?"price__discounted":""},O)),!E&&(()=>{const e=`(${m.productPriceSaveLabel} ${Math.round(L)}%)`;return T!==A?r.createElement("span",{id:"save-percentage"},e):null})())),E?r.createElement("div",{className:"product-info__sub eGift-info"},r.createElement("span",null,m.styleText,":"," ",h?.hps_style_msg),r.createElement("span",null,m.sendToText,":"," ",h?.egift_options?.hps_giftcard_recipient_email),C&&r.createElement("span",null,m.customMessageEgift,":"," ",C)):r.createElement("div",{className:"product-info__sub"},r.createElement("span",null,m?.productArtNo??"",":"," ",R()),r.createElement("span",null,m?.productColorLabel??"",":"," ",Q()?.color_label??""),r.createElement("span",null,m?.productSize??"",":"," ",w?Q()?.size_label:x??S)),!E&&!w&&!a&&r.createElement("button",{type:"button",id:"move-to-fav",onClick:()=>N(e)},m?.moveToFav??""))),!a&&r.createElement("div",{className:"product-summary__actions"},c?r.createElement($,null):r.createElement(V,{productImageUrl:b,onMoveToFav:()=>N(e),onRemove:()=>(async t=>{i(!0);const{uid:a}=t,n=m?.deleteSuccess??"",r=await U(a,p,n);if(r.items=r?.items?.map((e=>Number(e?.quantity)<=Number(e?.configured_variant?.stock_data?.qty)?{...e,isQuantityNotAvailable:!1,extensionAttributes:r?.extension_attributes?.cart?.items?.find((t=>Number(e?.id)===Number(t?.item_id)))}:{...e,isQuantityNotAvailable:!0,extensionAttributes:r?.extension_attributes?.cart?.items?.find((t=>Number(e?.id)===Number(t?.item_id)))})),e){const t=e?.product?.gtm_attributes;window.dispatchEvent(new CustomEvent("react:datalayerRemoveFromCartEvent",{detail:{quantity:e.quantity,productData:{gtm:{id:t?.id||"",name:t?.name||"",brand:t?.brand||"",category:t?.category||"",variant:t?.variant||"",price:t?.price||""},inStock:"IN_STOCK"===e?.configured_variant?.stock_status}}}))}d({...l,data:r}),i(!1);const o=r?.items?.length;o?(window.dispatchEvent(new CustomEvent("react:showPageSuccessMessage",{detail:{message:n}})),document.querySelector(".page-success-message.visible").scrollIntoView({behavior:"smooth"})):window.dispatchEvent(new CustomEvent("react:resetPageMessage"))})(e),productSku:e?.configured_variant?.sku??"",isEgift:E,isFreeGift:w,disabled:h?.error_message||e?.isQuantityNotAvailable||w}),(!E&&e.configured_variant?.stock_data?.qty||w)&&r.createElement("div",{className:h?.error_message?"product-qty-update-disable":"product-qty-update"},r.createElement(P,{isDisabled:w,totalQtyAvailable:e.configured_variant?.stock_data?.qty,orderedQty:e.quantity,qtyNotAvailable:I,isQtyAvailable:n,bagUpdatedSuccessLabel:m?.bagUpdatedSuccessLabel||"Your bag has been updated successfuly.",product:e})))),!E&&r.createElement("div",{className:"product-summary__footer"},(()=>{const t=e?.product?.promotions??[];return t?.length?r.createElement("div",{className:"product-offer-wrapper"},t.map((t=>r.createElement("a",{key:`${e?.product?.name??""}-${t?.label??""}`,href:`/${s()}/${t?.url??""}`,className:"product-offer"},t?.label??"")))):null})(),!a&&r.createElement(B,{product:e,cart:l})),w&&r.createElement("div",{className:"free_gift_container"},r.createElement("span",{className:"free_gift_label"},m?.freeGiftLabel)),!E&&h?.error_message&&r.createElement("div",{className:"product-label__container"},r.createElement("span",{className:"product-label"},h?.error_message||m?.outOfStockContent)),(()=>{const e=v?.data?.promoDynamicLabelCart?.products_labels??[],t=R();return(e.find((e=>e.sku===t))?.labels??[]).map((e=>r.createElement("div",{className:"product-label__container",key:`product-label-${t}-${e}`},r.createElement("span",{className:"product-label"},e.label))))})(),!E&&!n&&r.createElement("div",{className:"product-summary__qtyNotAvailable"},r.createElement("span",null,m?.quantityNotAvailableLabel||"The requested quantity is not available")))};const K=function(){const{cart:e}=(0,r.useContext)(f);return r.createElement("div",{className:"cart__shopping-list__items"},e?.data?.items?.map(((t,a)=>r.createElement(G,{key:`product-sku-${t?.configured_variant?.sku??a}`,product:t,currency:e?.data?.prices?.grand_total?.currency}))))};function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},z.apply(this,arguments)}const J=function({name:e,id:t,className:a,onIconClick:n}){const o=(0,r.useRef)();return(0,r.useEffect)((()=>{o?.current&&(0,y.decorateIcons)(o.current)}),[]),r.createElement("div",z({ref:o},t?{id:t}:{},a?{className:a}:{}),r.createElement("span",z({},n?{onClick:n}:{},{className:`icon icon-${e}`})))};const W=function({isOpen:e,children:t,onClose:a,containerClassName:n,headerClassName:o,bodyClassName:s}){const c=`dialog__container ${n??""}`.trim(),i=`dialog__header ${o??""}`.trim(),l=`dialog__body ${s??""}`.trim();return e?r.createElement("div",{className:"dialog__overlay"},r.createElement("div",{className:c},r.createElement("div",{className:i},r.createElement(J,{onIconClick:e=>{e.stopPropagation(),a()},name:"close",className:"icon-close-wrapper"})),r.createElement("div",{className:l},t))):null},X=({container:e,selector:t,onIntersect:a})=>((0,r.useEffect)((()=>{const n=document.querySelector(e),r=new MutationObserver((e=>{for(const r of e)if("childList"===r.type){const e=n?.querySelectorAll(t);e?.forEach((e=>a(e)))}}));return n&&r.observe(n,{childList:!0,subtree:!0}),()=>{r.disconnect()}}),[t,a]),null);const Z=function(){const e=`/${s()}/cart`;return X("#discount-vouchers-guest ",".banner-content h3",(t=>{const a=t.querySelector("a");a?.href?.includes("login")&&(a.href=`${a.href}?redirect=${e}`)})),(0,r.useEffect)((()=>{window.dispatchEvent(new CustomEvent("react:loadFragment",{detail:{path:`/${s()}/fragments/banners/offers/banner-membership`,targetSelector:"#discount-vouchers-guest"}}))}),[]),r.createElement("div",{id:"discount-vouchers-guest"})},ee=()=>N("hello-member/customers/offers",!0),te=()=>N("hello-member/customers/coupons",!0),ae=e=>N("hello-member/carts/mine/memberOffers",!0,e?"POST":"DELETE",e),ne=e=>N("hello-member/carts/mine/bonusVouchers",!0,e?"POST":"DELETE",e),re=async(e,t,a)=>{const n=a.join(""),r=e?`query customerCart {\n    commerce_customerCart { \n      id  \n      ${n}\n    }\n  }`:`query ($cartId: String!) {\n    commerce_cart(cart_id: $cartId) { \n      id\n      ${n}\n    }\n  }`;let o=null;try{const a=await S(r,{cartId:t},!0);o=e?a?.response?.data?.commerce_customerCart:a?.response?.data?.commerce_cart}catch(e){console.error("Error getting sub cart:",e)}return o},oe="voucher",se="offer";const ce=function(){const{isLoggedIn:e,cartId:t,cart:a,setCart:n,placeholders:o}=(0,r.useContext)(f),[s,c]=(0,r.useState)("voucher"),[i,l]=(0,r.useState)(null),[d,u]=(0,r.useState)([]),[m,p]=(0,r.useState)([]),[_,v]=(0,r.useState)([]),[g,b]=(0,r.useState)(!0),[h,E]=(0,r.useState)(null),[w,C]=(0,r.useState)(null),[N,S]=(0,r.useState)(!1),[k,x]=(0,r.useState)(!1),I=a?.data?.extension_attributes?.cart?.extension_attributes?.applied_hm_offer_code,A=a?.data?.extension_attributes?.cart?.extension_attributes?.applied_hm_voucher_codes,L=A?.split(",")??[],P=L.length;(0,r.useEffect)((()=>{l(I)}),[I]),(0,r.useEffect)((()=>{u(L)}),[A]),(0,r.useEffect)((()=>{document.querySelector("#discounts-vouchers-header")&&(0,y.decorateIcons)(document.querySelector("#discounts-vouchers-header")),Promise.all([ee(),te()]).then((e=>{const[t,a]=e;t?.response?.message?E(t?.response?.message??""):v(t?.response?.offers??[]),a?.response?.error?C(a?.response?.message??""):p(a?.response?.coupons??[]),b(!1)}))}),[]);const M=e=>new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"}),O=null!==i,q=d.length>0,R=!(s===se&&O||s===oe&&q||s===se&&O&&s===oe&&q)||k||g?"apply-button":"apply-button active",D=N||g,F=(e,t)=>{t?x(e):S(e)},U=async()=>{const r=await re(e,t,[T.CART_QUERY__EXTENSION_ATTRIBUTE,T.CART_QUERY__PRICES]);r&&n({...a,data:{...a?.data,...r}})},V=async(e=!1)=>{if(i){const t=_.find((e=>e.code===i));if(t)try{const a=e?null:{offerCode:t.code,offerType:""};F(!0,e);const n=await ae(a);!0===n.response?await U():E(n?.response?.message)}catch(e){console.error("Error applying offer",e),E("Failed to apply offer. Please try again.")}finally{F(!1,e)}}},Q=async(e=!1)=>{const t=d?.map((e=>{const t=m.find((t=>t.code===e));return t?t.code:null})).filter((e=>null!==e));try{const a=e?null:{voucherCodes:t};F(!0,e);const n=await ne(a);!0===n.response?await U():C(n?.response?.message)}catch(e){console.error("Error applying voucher",e),C("Failed to apply voucher. Please try again.")}finally{F(!1,e)}};return r.createElement(r.Fragment,null,r.createElement("div",{className:"popup-header"},r.createElement("span",{className:"popup-heading"},o.discountLabel)),r.createElement("div",{className:"discounts-vouchers-body"},r.createElement("div",{className:"title-label"},I?r.createElement("p",null,o.memberOffersApplied," ","(1)"):null,P?r.createElement("p",null,o.bonusVouchersApplied," ","(",P,")"):null),r.createElement("div",{className:"tabs"},r.createElement("button",{type:"button",disabled:g,className:"tab-button "+(s!==oe||g?"":"active"),onClick:()=>c(oe)},o.bonusVouchers),r.createElement("button",{type:"button",disabled:g,className:"tab-button "+(s!==se||g?"":"active"),onClick:()=>c(se)},o.memberOffers)),r.createElement("div",{className:"tab-content"},g?r.createElement($,null):r.createElement(r.Fragment,null,s===se?h&&r.createElement("span",{className:"error-messages"},h):w&&r.createElement("span",{className:"error-messages"},w),s===se?_?.map((e=>r.createElement("div",{key:`offer-${e?.code}`,id:`offer-${e?.code}`,className:"item discounts-vouchers-items"},r.createElement("div",null,r.createElement("input",{type:"radio",name:"offer-selection",checked:i===e.code,onChange:()=>{return t=e.code,void l(t);var t},className:"radio-input round-radio"})),r.createElement("div",null,r.createElement("span",{className:"desc-text"},e?.description),r.createElement("span",{className:"expiry_date"},o.bonusVouchersExpiresOn," ",M(e?.end_date)))))):m?.map((e=>r.createElement("div",{key:`voucher-${e?.id}`,id:`voucher-${e?.id}`,className:"item discounts-vouchers-items"},r.createElement("div",null,r.createElement("input",{type:"checkbox",name:"voucher-selection",checked:d.includes(e.code),onChange:()=>{return t=e.code,void u((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t},className:"checkbox-input square-checkbox"})),r.createElement("div",null,r.createElement("span",{className:"desc-text"},e?.description),r.createElement("span",{className:"expiry_date"},o.bonusVouchersExpiresOn," ",M(e?.end_date)))))))),r.createElement("div",{className:"popup-footer"},r.createElement("button",{type:"button",onClick:()=>s===se?V(!1):Q(!1),className:`${R} ${N?"loader":""}`},!N&&(s===se?o.applyOffersText:o.applyVouchersText)),r.createElement("button",{type:"button",className:`clear-button ${D?"clear-button-disabled":""} ${k?"loader":""}`,onClick:()=>s===se?V(!0):Q(!0)},k?"":o.clearAllText))))};const ie=function({className:e}){const{placeholders:t,isLoggedIn:a,cart:n}=(0,r.useContext)(f),[o,s]=(0,r.useState)(!1),c=a?"dialog__header-discount-and-voucher-loggedin-user":"dialog__header-discount-and-voucher-guest-user",i=a?"dialog__container-discount-and-voucher-loggedin-user":"dialog__container-discount-and-voucher-guest-user",l=n?.data?.extension_attributes?.cart?.extension_attributes?.applied_hm_offer_code,d=n?.data?.extension_attributes?.cart?.extension_attributes?.applied_hm_voucher_codes?.split(",")??[],u=(l?1:0)+(d?.length??0),m=()=>s(!0),p=()=>s(!1);return r.createElement(r.Fragment,null,r.createElement(W,{isOpen:o,onClose:p,headerClassName:c,containerClassName:i},a?r.createElement(ce,{handleCloseDialog:p}):r.createElement(Z,null)),r.createElement("span",{onClick:m,className:`${e} cart-discount-vouchers`,onKeyUp:e=>"Enter"===e.key&&m(),role:"button",tabIndex:0},`${t.promotionDiscountAndVouchersLabel}${u?` : ${u}`:""}`," ",u?null:r.createElement("div",{className:"promo-notification"})))},le=async(e,t,a)=>{const n=a?"carts/mine/updateCart":`guest-carts/${t}/updateCart`;let r={};try{const t=await N(n,a,"POST",e);r=t?.response,window.dispatchEvent(new CustomEvent("updateMiniCart"))}catch(e){}return r};const de=function(){const e=s(),{cartId:t,isLoggedIn:a,cart:n,setCart:o,promotion:c,setPromotion:i,placeholders:l,oosDisableButton:d}=(0,r.useContext)(f),u=n?.data?.extension_attributes?.totals?.coupon_code??"",[m,p]=(0,r.useState)(u);(0,r.useEffect)((()=>{p(u)}),[u]);const _=e=>"internal server error"===e?.toLowerCase()?l.promotionInvalidCodeMessage:e??"",v=async()=>{const e=await re(a,t,[T.CART_QUERY__PRICES,T.CART_QUERY__EXTENSION_ATTRIBUTE]);e&&o({...n,data:{...n?.data,...e}})},g=async()=>{if(m){i({...c,isApplyingPromoCode:!0,errorMessage:""});const e={extension:{action:"apply coupon"},coupon:m},n=await le(e,t,a);"success"===n.response_message?.[1]&&(window.dispatchEvent(new CustomEvent("react:dataLayerPromoCodeEvent",{detail:{couponCode:m,couponStatus:"pass"}})),await v()),"error_coupon"===n.response_message?.[1]&&(window.dispatchEvent(new CustomEvent("react:dataLayerPromoCodeEvent",{detail:{couponCode:m,couponStatus:"fail"}})),window.dispatchEvent(new CustomEvent("react:dataLayerCartErrorsEvent",{detail:{eventLabel:m,eventAction:n.response_message?.[0],eventPlace:`Error occured on ${window.location.href}`,couponCode:m}}))),i({...c,isApplyingPromoCode:!1,errorMessage:"error_coupon"===n.response_message?.[1]?_(n.response_message?.[0]):""})}else window.dispatchEvent(new CustomEvent("react:dataLayerPromoCodeEvent",{detail:{couponCode:m,couponStatus:"fail"}})),i({...c,errorMessage:l.promotionRequiredValidationErrorMessage})};return r.createElement("div",{className:"cart__promotion"},r.createElement("div",{className:"promotion__header"},r.createElement("span",{id:"promotion__label"},l.promotionLabel),r.createElement(ie,{className:("ar"===e?"promotion__discount-mg-rt-auto":"promotion__discount-mg-lt-auto")+" promotion__discount--desktop"})),r.createElement("div",{className:"promotion__form"},r.createElement("div",{className:"promotion__input-error-container"},r.createElement("div",{className:"promotion__input-container"},r.createElement("div",{className:"promotion__input "+(c.errorMessage?"promotion__input-error":"")},r.createElement("input",{className:u||d?"promotion__input-disabled":"",type:"text",id:"promotion-input",placeholder:l.promotionInputPlaceholder,value:m,onChange:e=>{return t=e.target.value,p(t),void i({...c,errorMessage:""});var t},disabled:c.isApplyingPromoCode})),u&&(c.isRemovingPromoCode?r.createElement("div",{className:"promotion__remove-icon"},r.createElement($,null)):r.createElement(J,{className:"promotion__remove-icon",id:"remove-promo",name:"close-round-black",onIconClick:async()=>{i({...c,isRemovingPromoCode:!0,errorMessage:""});const e={extension:{action:"remove coupon"},coupon:m},n=await le(e,t,a);"success"===n.response_message?.[1]&&await v(),i({...c,isRemovingPromoCode:!1,errorMessage:"error_coupon"===n.response_message?.[1]?_(n.response_message?.[0]):""})}})),d?r.createElement("button",{type:"button",id:"promotion-btn",className:"promotion__btn-disabled"},l?.promoBtn):u?r.createElement("button",{type:"button",id:"promotion-btn",className:"promotion__btn-disabled"},l.promotionAppliedButtonLabel):r.createElement("button",{type:"button",id:"promotion-btn",className:c.isApplyingPromoCode?"loader":"",onClick:g},c.isApplyingPromoCode?"":`${l.promotionApplyButtonLabel}`)),c.errorMessage&&r.createElement("div",{className:"promotion_error"},r.createElement(J,{name:"info-circle",className:"promotion_error-icon"}),r.createElement("span",{className:"error"},c.errorMessage))),r.createElement(ie,{className:"promotion__discount--mobile"})))};const ue=function({cardMethodTitle:e,paymentLogoList:t}){return e&&t?r.createElement("div",{id:"payment_method_logos",className:"payment_method_logos_blocks"},r.createElement("div",{className:"payment_logos_title"},e),r.createElement("div",{className:"payment_logos"},r.createElement("div",{className:"logos_bar"},Array.from(t).map((e=>r.createElement("span",{key:`card-payment-option-${H()}`,dangerouslySetInnerHTML:{__html:e.innerHTML}})))))):null};const me=function({content:e,children:t}){const[a,n]=(0,r.useState)(!1);return r.createElement("div",{className:"tooltip-container",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1)},a&&r.createElement("div",{className:"tooltip-content",dangerouslySetInnerHTML:{__html:e}}),t)};const pe=function({cardMethodTitle:e,paymentLogoList:t}){const{cart:a,placeholders:n,priceDecimals:o,isLoggedIn:s,oosDisableButton:c,cartId:i,setIsCheckoutFlag:l,setCart:d}=(0,r.useContext)(f),u=a?.data?.prices?.grand_total?.value??0,m=a?.data?.prices?.grand_total?.currency??"",p=a?.data?.prices?.subtotal_including_tax?.value??0,_=`/${document.documentElement.lang}/checkout`,v=`/${document.documentElement.lang}/cart/login`,g=(a?.data?.prices?.applied_taxes??[]).reduce(((e,t)=>e+(t.amount.value??0)),0),b=a?.data?.prices?.discount?.amount?.value,y=a?.data?.extension_attributes?.cart?.extension_attributes?.hm_voucher_discount,h=a?.data?.extension_attributes?.cart?.extension_attributes?.applied_hm_voucher_codes?.split(",")?.length??0,E=async()=>{d({...a,isLoading:!0});const e=await le({extension:{action:"refresh"}},i,s),t=e?.cart?.items,n=a?.data?.extension_attributes?.cart?.items,r=n?.map((e=>{const a=t?.find((t=>e?.sku===t?.sku));return Object.keys(a)?.length?{...e,extension_attributes:a?.extension_attributes}:e}));"success"===e?.response_message[1]?(l(!0),d({...a,isLoading:!1}),window.location.href=s?_:v):(l(!1),d({...a,data:{...a?.data,extension_attributes:{...a?.data?.extension_attributes,cart:{...a?.data?.extension_attributes?.cart,items:r}},items:a?.data?.items?.map((e=>{const t=r?.find((t=>Number(e?.id)===Number(t?.item_id)));return Object?.keys(t)?.length?{...e,extensionAttributes:t}:{...e}}))},isLoading:!1}))},w=Y({price:p,priceDecimals:o,currency:m}),C=Y({price:b,priceDecimals:o,currency:m}),N=Y({price:u,priceDecimals:o,currency:m}),S=Y({price:y,priceDecimals:o,currency:m}),k=(0,r.useMemo)((()=>{const e=a?.data?.extension_attributes?.cart?.extension_attributes,t=!!e?.has_exclusive_coupon,r=!!e?.applied_hm_offer_code,o=a?.data?.extension_attributes?.totals?.coupon_code??"",s=a?.data?.extension_attributes?.totals?.items?.some((e=>!!e?.extension_attributes?.adv_card_applicable));let c=`<div className="applied-discounts-title">${n.discountTooltipMessageApplied}</div>`;return t?(c+=`<div className="applied-exclusive-couponcode">${o}</div>`,c):(r&&(c=`<div className="applied-hm-discounts-title">${n.discountTooltipMessageMemberDiscount}</div>`),s&&(c+=`<div class="promotion-label"><strong>${n.discountTooltipMessageAdvantageCardDiscount}</strong></div>`),c)}),[a]);return r.createElement("div",null,r.createElement("div",{"aria-label":"order-summary",className:"order-summary-label"},n?.orderSummaryTitle),r.createElement("div",{className:"order__summary"},r.createElement("div",{className:"order__summary__secondaryCard"},r.createElement("div",{className:"common_container"},r.createElement("span",{"aria-label":"sub-total",className:"sub-total-label"},n?.subTotalLabel),r.createElement("span",{"aria-label":"value"}," ",w)),b<0&&r.createElement("div",{className:"common_container"},r.createElement("span",{"aria-label":"discount",className:"discount-label"},n?.discountsLabel,r.createElement(me,{content:k},r.createElement(J,{name:"info-blue",className:"discount-icon"}))),r.createElement("span",{"aria-label":"value",className:"discount-label"},C)),h?r.createElement("div",{className:"common_container"},r.createElement("span",{"aria-label":"bonus-voucher-discount",className:"bonus-voucher-discount-label"},`${h} ${n?.bonusVoucherAppliedLabel}`),r.createElement("span",{"aria-label":"value",className:"bonus-voucher-discount-label"},S)):null,r.createElement("hr",{className:"order_summary_border_bottom"}),r.createElement("div",{className:"common_container"},r.createElement("span",{className:"order_total_label","aria-label":"order-total"},n?.orderTotalLabel),r.createElement("span",{className:"order_total_label","aria-label":"value"},N)),r.createElement("div",{className:"common_container"},r.createElement("span",{className:"excluding_label","aria-label":"excluding"},n.excludingDelivery),g>0&&r.createElement("span",{className:"excluding_label"},n.inclusiveVat))),r.createElement("div",{className:"checkout__action_container"},r.createElement("div",{className:c?"checkout_disable":"checkout_action",onClick:E,onKeyUp:e=>"Enter"===e.key&&E(),role:"button",tabIndex:c?-1:0},r.createElement("span",{className:"checkout"},n.checkoutBtn))),r.createElement(ue,{cardMethodTitle:e,paymentLogoList:t})))};const _e=function({data:e}){return r.createElement("div",{className:"delivery__proposition-wrapper"},e&&Array.from(e).map((e=>r.createElement("div",{className:"proposition-item",key:`delivery-method-${H()}`},r.createElement("span",{dangerouslySetInnerHTML:{__html:e.innerHTML}})))))};const ve=function({deliveryMethods:e,cardMethodTitle:t,paymentLogoList:a}){return r.createElement("div",{className:"cart__summary-wrapper"},r.createElement(de,null),r.createElement(pe,{cardMethodTitle:t,paymentLogoList:a}),r.createElement(_e,{data:e}))};const ge=function({content:e}){const{cart:t,cartShowFreeReturns:a}=(0,r.useContext)(f),{cardmethodtitle:n,paymentlogolist:o,deliverymethods:s}=e,c=t?.data?.total_quantity??0,i=t?.data?.prices?.grand_total?.currency??"",l=t?.data?.prices?.grand_total?.value??0,d=e.carttitle?.replace("{{COUNT}}",c),u=e.mobilecarttitle?.replace("{{COUNT}}",c).replace("{{CURRENCY}}",i).replace("{{PRICE}}",l.toFixed(2)),m=t?.data?.items,p=document.querySelector(".section.carousel-container:not(.cart-section)"),[_,v]=(0,r.useState)(!1),g=()=>{p&&p.classList.remove("hidden")},b=()=>{p&&p.classList.add("hidden")};return(0,r.useEffect)((()=>{b()}),[]),(0,r.useEffect)((()=>(m?.length?g():b(),()=>{g()})),[m]),(0,r.useEffect)((()=>{const e=()=>{window.scrollY>100?v(!0):v(!1)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}}),[]),r.createElement("div",{className:"cart__shopping-block"},r.createElement("div",{className:"cart__shopping-list"},r.createElement("div",{className:"cart-body-title-section"},r.createElement("div",{className:"cart-title-mobile "+(_?"fixed":"")},e.mobilecarttitle&&r.createElement("span",{dangerouslySetInnerHTML:{__html:u}})),r.createElement("div",{className:"cart-title"},d&&r.createElement("span",{dangerouslySetInnerHTML:{__html:d}})),e.freereturnlable&&a&&r.createElement("div",{className:"online-returns-cart-banner"},r.createElement("div",{dangerouslySetInnerHTML:{__html:e.freereturnlable}})),r.createElement(K,null))),r.createElement(ve,{deliveryMethods:s,cardMethodTitle:n,paymentLogoList:o}))};const be=function(){const{placeholders:e}=(0,r.useContext)(f);return(0,r.useEffect)((()=>{const e=document.querySelector(".cart-container"),t=document.querySelector(".cart.block"),a=document.querySelector(".cart-container .carousel-wrapper");return e&&e.classList.add("cart-container-full"),t&&t.classList.add("empty-cart-block"),a&&a.classList.add("carousel-empty-cart"),()=>{e&&e.classList.remove("cart-container-full"),t&&t.classList.remove("empty-cart-block"),a&&a.classList.remove("carousel-empty-cart")}}),[]),r.createElement("div",{className:"cart__empty"},r.createElement("span",{className:"cart-empty__title"},e.emptyCartMessage),r.createElement("span",{className:"cart-empty__recomendation-title"},e.emptyCartFavMessage))};const fe=function({content:e}){A(1);const{activeProgressStep:t}=(0,r.useContext)(f),{cartId:a,cart:n}=(0,r.useContext)(f),o=n?.data?.items;return n.isLoading?r.createElement($,null):a&&o?.length?r.createElement(r.Fragment,null,r.createElement(E,null),r.createElement("div",{className:"cart__checkout__blocks"},t===p.CART_STEP&&r.createElement(ge,{content:e}))):r.createElement(be,null)};const ye=async function(e="default",t=""){window.placeholders=window.placeholders||{};const a=e+t;return window.placeholders[a]||(window.placeholders[a]=new Promise((n=>{fetch(`${"default"===e?"":e}/placeholders.json${t?`?${t}`:""}`).then((e=>e.ok?e.json():{})).then((e=>{const t={};e.data.filter((e=>e.Key)).forEach((e=>{t[(0,y.toCamelCase)(e.Key)]=e.Text})),window.placeholders[a]=t,n(window.placeholders[a])})).catch((()=>{window.placeholders[a]={},n(window.placeholders[a])}))}))),window.placeholders[a]};async function he(e){const t=document.documentElement.lang,a=await ye(t?`/${t}`:"","sheet=cart"),n=(0,o.H)(e),[s,c,i,,l,d]=e.querySelectorAll(".cart > div"),u=s?.querySelectorAll("p"),m=c?.querySelectorAll("li"),p=i?.querySelector("p"),v=i?.querySelectorAll("li"),[,...g]=d?.querySelectorAll("div > table > tbody > tr")||[],f=l?.querySelectorAll("div")[0],y=f?.querySelector("strong");let h={mobilecarttitle:"",carttitle:"",freereturnlable:"",standard_delivery:"",sameday_delivery:"",click_collect:"",cardmethodtitle:"",paymentlogolist:null,paymentMethods:"",checkoutOrderSummaryTitle:""};const[E,w,C]=u;h={mobilecarttitle:E?E.innerHTML:"",carttitle:w?w.innerText:"",freereturnlable:C?C.innerHTML:"",cardmethodtitle:p?p.innerHTML:"",paymentlogolist:v,deliverymethods:m,paymentMethods:g,checkoutOrderSummaryTitle:y?y?.innerHTML:""},n.render(r.createElement(b,{placeholders:{..._,...a}},r.createElement(fe,{content:h})))}}},n={};function r(e){var t=n[e];if(void 0!==t)return t.exports;var o=n[e]={exports:{}};return a[e](o,o.exports,r),o.exports}r.m=a,t=[],r.O=(e,a,n,o)=>{if(!a){var s=1/0;for(d=0;d<t.length;d++){for(var[a,n,o]=t[d],c=!0,i=0;i<a.length;i++)(!1&o||s>=o)&&Object.keys(r.O).every((e=>r.O[e](a[i])))?a.splice(i--,1):(c=!1,o<s&&(s=o));if(c){t.splice(d--,1);var l=n();void 0!==l&&(e=l)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[a,n,o]},r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={cart:0};r.O.j=t=>0===e[t];var t=(t,a)=>{var n,o,[s,c,i]=a,l=0;if(s.some((t=>0!==e[t]))){for(n in c)r.o(c,n)&&(r.m[n]=c[n]);if(i)var d=i(r)}for(t&&t(a);l<s.length;l++)o=s[l],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(d)},a=self.webpackChunk_adobe_aem_boilerplate=self.webpackChunk_adobe_aem_boilerplate||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var o=r.O(void 0,["vendor"],(()=>r(240))),s=(o=r.O(o)).A;export{s as default};